import{r as m,u as A,a as w,j as d,b as y,f as N,R as L}from"./index-AMLw9QuM.js";var M=new Map,I=new WeakMap,E=0,V=void 0;function O(e){return e?(I.has(e)||(E+=1,I.set(e,E.toString())),I.get(e)):"0"}function T(e){return Object.keys(e).sort().filter(t=>e[t]!==void 0).map(t=>`${t}_${t==="root"?O(e.root):e[t]}`).toString()}function $(e){const t=T(e);let r=M.get(t);if(!r){const o=new Map;let n;const c=new IntersectionObserver(i=>{i.forEach(s=>{var l;const g=s.isIntersecting&&n.some(u=>s.intersectionRatio>=u);e.trackVisibility&&typeof s.isVisible>"u"&&(s.isVisible=g),(l=o.get(s.target))==null||l.forEach(u=>{u(g,s)})})},e);n=c.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),r={id:t,observer:c,elements:o},M.set(t,r)}return r}function P(e,t,r={},o=V){if(typeof window.IntersectionObserver>"u"&&o!==void 0){const l=e.getBoundingClientRect();return t(o,{isIntersecting:o,target:e,intersectionRatio:typeof r.threshold=="number"?r.threshold:0,time:0,boundingClientRect:l,intersectionRect:l,rootBounds:l}),()=>{}}const{id:n,observer:c,elements:i}=$(r),s=i.get(e)||[];return i.has(e)||i.set(e,s),s.push(t),c.observe(e),function(){s.splice(s.indexOf(t),1),s.length===0&&(i.delete(e),c.unobserve(e)),i.size===0&&(c.disconnect(),M.delete(n))}}function D({threshold:e,delay:t,trackVisibility:r,rootMargin:o,root:n,triggerOnce:c,skip:i,initialInView:s,fallbackInView:l,onChange:g}={}){var u;const[v,j]=m.useState(null),b=m.useRef(),[h,x]=m.useState({inView:!!s,entry:void 0});b.current=g,m.useEffect(()=>{if(i||!v)return;let p;return p=P(v,(C,S)=>{x({inView:C,entry:S}),b.current&&b.current(C,S),S.isIntersecting&&c&&p&&(p(),p=void 0)},{root:n,rootMargin:o,threshold:e,trackVisibility:r,delay:t},l),()=>{p&&p()}},[Array.isArray(e)?e.toString():e,v,n,o,c,i,r,l,t]);const f=(u=h.entry)==null?void 0:u.target,R=m.useRef();!v&&f&&!c&&!i&&R.current!==f&&(R.current=f,x({inView:!!s,entry:void 0}));const a=[j,h.inView,h.entry];return a.ref=a[0],a.inView=a[1],a.entry=a[2],a}const _=({id:e})=>{const[t,r]=D({rootMargin:"200px 0px"}),o=A(f=>f.setDetailsModalData),[n,c]=m.useState(null),[i,s]=m.useState(!1),l=()=>{s(!0)},g=w({opacity:1,from:{opacity:0}}),u=w({opacity:i?1:0}),[{transform:v,color:j,opacity:b},h]=w(()=>({transform:"scale(1)",color:"#000",opacity:"0.7",marginTop:0}));m.useEffect(()=>{const f=new AbortController;return r&&(async()=>{console.info("fetching details for object id:"+e);try{const a=await N(e,f.signal);c(a)}catch(a){a.name==="AbortError"?(console.log("Fetch details aborted ðŸ‘€"),console.dir(a)):console.error(`Error fetching item id:${e}`,a)}})(),function(){f.abort()}},[e,r]);const x=()=>r?n==null?d.jsx(z,{}):d.jsxs(y.div,{onClick:()=>{o(n)},children:[n.primaryImageSmall&&d.jsx(y.img,{style:u,hidden:!0,alt:n.objectName,src:n.primaryImageSmall,onLoad:l}),d.jsx(y.span,{style:{color:j,opacity:b},children:n.title})]},n.objectID):null;return d.jsx(y.div,{style:{...g,transform:v},className:"card",ref:t,onMouseOver:()=>h({color:"#fff",opacity:"1",transform:"scale(1.06)"}),onMouseLeave:()=>h({color:"#000",opacity:"0.7",transform:"scale(1)"}),children:x()})},z=()=>d.jsxs("div",{className:"shimmer","aria-label":"Loading content",children:[d.jsx("div",{className:"image"}),d.jsx("div",{className:"content",children:d.jsx("span",{className:"title"})})]}),B=L.memo(_),G=({data:e})=>{const[t,r]=D({rootMargin:"200px 0px"});return d.jsx("div",{ref:t,style:{minHeight:r?null:"30000px"},className:"search-result-grid",children:r&&e.map(o=>d.jsx(B,{id:o},o))})},H=G;export{H as default};
