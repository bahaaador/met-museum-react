"use strict";(self.webpackChunkmet_museum_react=self.webpackChunkmet_museum_react||[]).push([[257],{257:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var r=n(413),i=n(885),o=n(925),s=n(791),a=n(671),c=n(144),l=n(136),u=n(388);function d(){return d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(this,arguments)}var f=new Map,h=new WeakMap,m=0,v=void 0;function p(e){return Object.keys(e).sort().filter((function(t){return void 0!==e[t]})).map((function(t){return"".concat(t,"_").concat("root"===t?(n=e.root)?(h.has(n)||(m+=1,h.set(n,m.toString())),h.get(n)):"0":e[t]);var n})).toString()}function y(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:v;if("undefined"===typeof window.IntersectionObserver&&void 0!==r){var i=e.getBoundingClientRect();return t(r,{isIntersecting:r,target:e,intersectionRatio:"number"===typeof n.threshold?n.threshold:0,time:0,boundingClientRect:i,intersectionRect:i,rootBounds:i}),function(){}}var o=function(e){var t=p(e),n=f.get(t);if(!n){var r,i=new Map,o=new IntersectionObserver((function(t){t.forEach((function(t){var n,o=t.isIntersecting&&r.some((function(e){return t.intersectionRatio>=e}));e.trackVisibility&&"undefined"===typeof t.isVisible&&(t.isVisible=o),null==(n=i.get(t.target))||n.forEach((function(e){e(o,t)}))}))}),e);r=o.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),n={id:t,observer:o,elements:i},f.set(t,n)}return n}(n),s=o.id,a=o.observer,c=o.elements,l=c.get(e)||[];return c.has(e)||c.set(e,l),l.push(t),a.observe(e),function(){l.splice(l.indexOf(t),1),0===l.length&&(c.delete(e),a.unobserve(e)),0===c.size&&(a.disconnect(),f.delete(s))}}var g=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function b(e){return"function"!==typeof e.children}s.Component;function j(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.threshold,r=t.delay,o=t.trackVisibility,a=t.rootMargin,c=t.root,l=t.triggerOnce,u=t.skip,d=t.initialInView,f=t.fallbackInView,h=t.onChange,m=s.useState(null),v=(0,i.Z)(m,2),p=v[0],g=v[1],b=s.useRef(),j=s.useState({inView:!!d,entry:void 0}),x=(0,i.Z)(j,2),w=x[0],k=x[1];b.current=h,s.useEffect((function(){var e;if(!u&&p)return e=y(p,(function(t,n){k({inView:t,entry:n}),b.current&&b.current(t,n),n.isIntersecting&&l&&e&&(e(),e=void 0)}),{root:c,rootMargin:a,threshold:n,trackVisibility:o,delay:r},f),function(){e&&e()}}),[Array.isArray(n)?n.toString():n,p,c,a,l,u,o,f,r]);var Z=null==(e=w.entry)?void 0:e.target,N=s.useRef();p||!Z||l||u||N.current===Z||(N.current=Z,k({inView:!!d,entry:void 0}));var V=[g,w.inView,w.entry];return V.ref=V[0],V.inView=V[1],V.entry=V[2],V}var x=n(165),w=n(861),k=n(374),Z=n(184),N=["id","setDetailOverlay"],V=function(e){var t=e.id,n=e.setDetailOverlay,a=(0,o.Z)(e,N),c=j({rootMargin:"200px 0px"}),l=(0,i.Z)(c,2),u=l[0],d=l[1],f=(0,s.useState)(null),h=(0,i.Z)(f,2),m=h[0],v=h[1];(0,s.useEffect)((function(){var e=new AbortController,n=function(){var n=(0,w.Z)((0,x.Z)().mark((function n(){var r,i;return(0,x.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.info("downloading details for object id:"+t),n.prev=1,n.next=4,fetch("https://collectionapi.metmuseum.org/public/collection/v1/objects/".concat(t),{cache:"force-cache",signal:e.signal});case 4:return r=n.sent,n.next=7,r.json();case 7:i=n.sent,v(i),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),"AbortError"===n.t0.name?(console.log("Fetch Details aborted \ud83d\udc40"),console.dir(n.t0)):console.error("Error occured",n.t0);case 14:case"end":return n.stop()}}),n,null,[[1,11]])})));return function(){return n.apply(this,arguments)}}();return d&&n(),function(){e.abort()}}),[t,d]);var p=(0,k.q_)({opacity:1,from:{opacity:0}}),y=(0,k.q_)((function(){return{transform:"scale(1)",color:"#000",opacity:"0.7",marginTop:1}})),g=(0,i.Z)(y,2),b=g[0],V=b.transform,I=b.color,O=b.opacity,C=g[1];return(0,Z.jsx)(k.q.div,(0,r.Z)((0,r.Z)({ref:u},a),{},{onMouseOver:function(){return C({color:"#fff",opacity:"1",transform:"scale(1.06)",marginTop:10})},onMouseLeave:function(){return C({x:100,color:"#000",opacity:"0.7",transform:"scale(1)"})},children:d&&m?(0,Z.jsxs)(k.q.div,{style:(0,r.Z)((0,r.Z)({},p),{},{transform:V}),onClick:function(){n(m)},children:[m.primaryImageSmall&&(0,Z.jsx)("img",{alt:m.objectName,src:m.primaryImageSmall}),(0,Z.jsxs)(k.q.span,{style:{color:I,opacity:O},children:[m.title,(0,Z.jsx)("a",{target:"_new",href:m.objectURL,"aria-label":"View ".concat(m.objectName," on museum's website"),children:"Link"})]})]},m.objectID):null}))},I=function(e){var t=e.item,n=e.closeModal,r=(0,s.useState)(!0),o=(0,i.Z)(r,2),a=o[0],c=o[1],l=(0,k.q_)({top:a?"50%":"150%",config:{tension:480,friction:60},from:{top:"150%"}}),u=(0,k.q_)({opacity:a?1:0,from:{opacity:0}});return(0,s.useEffect)((function(){return document.body.style.overflowY="hidden",function(){document.body.style.overflowY="unset",document.body.style.overflowX="hidden"}}),[]),(0,Z.jsx)(k.q.div,{className:"modal-overlay",onClick:function(){c(!1),setTimeout(n,250)},style:u,children:(0,Z.jsxs)(k.q.div,{className:"modal-content",style:l,children:[(0,Z.jsx)("div",{className:"image-wrapper",children:(0,Z.jsx)("img",{alt:t.objectName,src:t.primaryImageSmall})}),(0,Z.jsxs)("div",{className:"item-row",children:[(0,Z.jsx)("label",{children:"Title:"}),(0,Z.jsx)("div",{children:t.title})]}),(0,Z.jsxs)("div",{className:"item-row",children:[(0,Z.jsx)("label",{children:"Artist:"}),(0,Z.jsx)("div",{children:t.artistDisplayName})]}),(0,Z.jsxs)("div",{className:"item-row",children:[(0,Z.jsx)("label",{children:"Classification:"}),(0,Z.jsx)("div",{children:t.classification})]}),(0,Z.jsxs)("div",{className:"item-row",children:[(0,Z.jsx)("label",{children:"Dimensions:"}),(0,Z.jsx)("div",{children:t.dimensions})]}),(0,Z.jsxs)("div",{className:"item-row",children:[(0,Z.jsx)("label",{children:"Date:"}),(0,Z.jsx)("div",{children:t.objectDate})]}),(0,Z.jsxs)("div",{className:"item-row",children:[(0,Z.jsx)("label",{children:"Period:"}),(0,Z.jsx)("div",{children:t.period})]}),(0,Z.jsxs)("div",{className:"item-row",children:[(0,Z.jsx)("label",{children:"CreditLine:"}),(0,Z.jsx)("div",{children:t.creditLine})]})]})})},O=["data"],C=function(e){var t=e.data,n=(0,o.Z)(e,O),a=j({rootMargin:"200px 0px"}),c=(0,i.Z)(a,2),l=c[0],u=c[1],d=(0,s.useState)(null),f=(0,i.Z)(d,2),h=f[0],m=f[1];return(0,Z.jsxs)("div",{ref:l,style:{minHeight:u?null:"30000px"},className:"Search-Result-Grid",children:[u&&t.map((function(e){return(0,s.createElement)(V,(0,r.Z)((0,r.Z)({className:"object-container"},n),{},{setDetailOverlay:m,id:e,key:e}))})),h&&(0,Z.jsx)(I,{item:h,closeModal:function(){return m(null)}})]})}}}]);
//# sourceMappingURL=257.8378d803.chunk.js.map